{"ast":null,"code":"import \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport store from '../store';\nVue.use(VueRouter);\n\n// 路由配置\nvar routes = [{\n  path: '/',\n  name: 'Home',\n  component: function component() {\n    return import('../views/Home.vue');\n  },\n  meta: {\n    title: '首页',\n    requiresAuth: true\n  }\n}, {\n  path: '/login',\n  name: 'Login',\n  component: function component() {\n    return import('../views/Login.vue');\n  },\n  meta: {\n    title: '登录',\n    requiresAuth: false\n  }\n}, {\n  path: '/register',\n  name: 'Register',\n  component: function component() {\n    return import('../views/Register.vue');\n  },\n  meta: {\n    title: '注册',\n    requiresAuth: false\n  }\n}, {\n  path: '/upload',\n  name: 'Upload',\n  component: function component() {\n    return import('../views/Upload.vue');\n  },\n  meta: {\n    title: '上传日志',\n    requiresAuth: true\n  }\n}, {\n  path: '/files',\n  name: 'FileList',\n  component: function component() {\n    return import('../views/FileList.vue');\n  },\n  meta: {\n    title: '文件列表',\n    requiresAuth: true\n  }\n}, {\n  path: '/analysis/:id',\n  name: 'Analysis',\n  component: function component() {\n    return import('../views/Analysis.vue');\n  },\n  meta: {\n    title: '日志分析',\n    requiresAuth: true\n  }\n}, {\n  path: '/dashboard',\n  name: 'Dashboard',\n  component: function component() {\n    return import('../views/Dashboard.vue');\n  },\n  meta: {\n    title: '态势感知',\n    requiresAuth: true\n  }\n}, {\n  path: '/profile',\n  name: 'Profile',\n  component: function component() {\n    return import('../views/Profile.vue');\n  },\n  meta: {\n    title: '个人资料',\n    requiresAuth: true\n  }\n}, {\n  path: '*',\n  redirect: '/'\n}];\nvar router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes: routes\n});\n\n// 全局导航守卫\nrouter.beforeEach(function (to, from, next) {\n  // 设置页面标题\n  document.title = to.meta.title ? \"\".concat(to.meta.title, \" - \\u65E5\\u5FD7\\u6001\\u52BF\\u611F\\u77E5\\u7CFB\\u7EDF\") : '日志态势感知系统';\n\n  // 已登录用户尝试访问登录/注册页时重定向到首页\n  var isLoginPage = to.path === '/login' || to.path === '/register';\n  if (isLoginPage && store.state.authenticated) {\n    return next({\n      path: '/'\n    });\n  }\n\n  // 检查是否需要身份验证\n  if (to.matched.some(function (record) {\n    return record.meta.requiresAuth;\n  })) {\n    // 该路由需要身份验证，检查是否已登录\n    if (!store.state.authenticated) {\n      // 未登录，重定向到登录页\n      next({\n        path: '/login',\n        query: {\n          redirect: to.fullPath\n        }\n      });\n    } else {\n      // 已登录，继续导航\n      next();\n    }\n  } else {\n    // 不需要身份验证，继续\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","store","use","routes","path","name","component","meta","title","requiresAuth","redirect","router","mode","base","process","env","BASE_URL","beforeEach","to","from","next","document","concat","isLoginPage","state","authenticated","matched","some","record","query","fullPath"],"sources":["C:/Users/吴天翼/log-analysis-system/frontend/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\nimport store from '../store'\r\n\r\nVue.use(VueRouter)\r\n\r\n// 路由配置\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    name: 'Home',\r\n    component: () => import('../views/Home.vue'),\r\n    meta: {\r\n      title: '首页',\r\n      requiresAuth: true\r\n    }\r\n  },\r\n  {\r\n    path: '/login',\r\n    name: 'Login',\r\n    component: () => import('../views/Login.vue'),\r\n    meta: {\r\n      title: '登录',\r\n      requiresAuth: false\r\n    }\r\n  },\r\n  {\r\n    path: '/register',\r\n    name: 'Register',\r\n    component: () => import('../views/Register.vue'),\r\n    meta: {\r\n      title: '注册',\r\n      requiresAuth: false\r\n    }\r\n  },\r\n  {\r\n    path: '/upload',\r\n    name: 'Upload',\r\n    component: () => import('../views/Upload.vue'),\r\n    meta: {\r\n      title: '上传日志',\r\n      requiresAuth: true\r\n    }\r\n  },\r\n  {\r\n    path: '/files',\r\n    name: 'FileList',\r\n    component: () => import('../views/FileList.vue'),\r\n    meta: {\r\n      title: '文件列表',\r\n      requiresAuth: true\r\n    }\r\n  },\r\n  {\r\n    path: '/analysis/:id',\r\n    name: 'Analysis',\r\n    component: () => import('../views/Analysis.vue'),\r\n    meta: {\r\n      title: '日志分析',\r\n      requiresAuth: true\r\n    }\r\n  },\r\n  {\r\n    path: '/dashboard',\r\n    name: 'Dashboard',\r\n    component: () => import('../views/Dashboard.vue'),\r\n    meta: {\r\n      title: '态势感知',\r\n      requiresAuth: true\r\n    }\r\n  },\r\n  {\r\n    path: '/profile',\r\n    name: 'Profile',\r\n    component: () => import('../views/Profile.vue'),\r\n    meta: {\r\n      title: '个人资料',\r\n      requiresAuth: true\r\n    }\r\n  },\r\n  {\r\n    path: '*',\r\n    redirect: '/'\r\n  }\r\n]\r\n\r\nconst router = new VueRouter({\r\n  mode: 'history',\r\n  base: process.env.BASE_URL,\r\n  routes\r\n})\r\n\r\n// 全局导航守卫\r\nrouter.beforeEach((to, from, next) => {\r\n  // 设置页面标题\r\n  document.title = to.meta.title ? `${to.meta.title} - 日志态势感知系统` : '日志态势感知系统'\r\n  \r\n  // 已登录用户尝试访问登录/注册页时重定向到首页\r\n  const isLoginPage = to.path === '/login' || to.path === '/register'\r\n  if (isLoginPage && store.state.authenticated) {\r\n    return next({ path: '/' })\r\n  }\r\n  \r\n  // 检查是否需要身份验证\r\n  if (to.matched.some(record => record.meta.requiresAuth)) {\r\n    // 该路由需要身份验证，检查是否已登录\r\n    if (!store.state.authenticated) {\r\n      // 未登录，重定向到登录页\r\n      next({\r\n        path: '/login',\r\n        query: { redirect: to.fullPath }\r\n      })\r\n    } else {\r\n      // 已登录，继续导航\r\n      next()\r\n    }\r\n  } else {\r\n    // 不需要身份验证，继续\r\n    next()\r\n  }\r\n})\r\n\r\nexport default router "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}