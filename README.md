# 日志态势感知分析系统

这是一个强大的日志分析系统，可以上传、处理、分析和可视化各种离线日志数据，并提供预测功能。系统采用前后端分离架构，前端使用Vue.js开发，后端使用Flask提供RESTful API服务。

## 功能特点

1. **用户认证**
   - 安全的用户登录与注册系统
   - JWT token认证
   - 权限管理

2. **日志上传**
   - 支持各种格式的离线日志文件上传（.log, .txt, .csv, .json）
   - 实时上传进度显示
   - 文件管理（查看、删除等）

3. **日志处理**
   - 自动解析和标准化不同格式的日志
   - 异步处理大型日志文件
   - 处理进度实时显示

4. **日志分析**
   - 智能分析日志内容
   - 异常检测（登录失败、异常时间登录等）
   - 生成摘要统计信息
   - 安全事件提取

5. **数据可视化**
   - 直观的仪表盘展示日志分析结果
   - 多种图表类型（折线图、柱状图、饼图等）
   - 自定义时间范围的数据筛选

6. **态势感知与预测**
   - 日志异常模式识别
   - 趋势预测和预警功能

## 系统架构

### 前端

前端使用Vue.js框架，主要使用以下技术：

- Vue.js 2.x
- Vuex (状态管理)
- Vue Router (路由管理)
- Element UI (UI组件库)
- ECharts (图表可视化)
- Axios (HTTP请求)

### 后端

后端采用Python Flask框架开发，主要使用以下技术：

- Flask (Web框架)
- Flask-SQLAlchemy (ORM)
- Flask-JWT-Extended (JWT认证)
- Flask-Bcrypt (密码加密)
- pandas (数据处理)
- numpy (科学计算)

### 数据库

系统使用SQLite作为开发环境数据库，可以轻松切换到MySQL等生产环境数据库。

### 文件存储

日志文件存储在服务器本地文件系统中，每个文件使用UUID命名以避免冲突。

## 项目结构

```
log-analysis-system/
├── frontend/            # 前端Vue.js应用
│   ├── public/          # 静态资源
│   └── src/             # 源代码
│       ├── assets/      # 静态资源
│       ├── components/  # 组件
│       ├── router/      # 路由
│       ├── store/       # Vuex存储
│       └── views/       # 页面
├── backend/             # 后端Flask应用
│   ├── app/             # 应用代码
│   │   ├── analyzers/   # 日志分析器
│   │   ├── models/      # 数据模型
│   │   ├── routes/      # API路由
│   │   └── utils/       # 工具函数
│   └── requirements.txt # 依赖文件
├── uploads/             # 上传的日志文件存储位置
├── start.py             # 一键启动脚本
└── README.md            # 项目说明
```

## 快速开始

最简单的方法是使用一键启动脚本：

```bash
python start.py
```

此脚本将自动：
1. 检查并安装所需的依赖
2. 启动后端服务
3. 启动前端开发服务器
4. 在浏览器中打开应用

如果您遇到任何问题，可以分别启动前端和后端服务：

### 前端

1. 安装依赖：
```bash
cd frontend
npm install
```

2. 开发模式启动：
```bash
npm run serve
```

3. 构建生产版本：
```bash
npm run build
```

### 后端

1. 安装Python依赖：
```bash
cd backend
pip install -r requirements.txt
```

2. 启动开发服务器：
```bash
python app.py
```

## 使用流程

1. 注册/登录系统
2. 上传日志文件
3. 等待系统处理日志
4. 查看分析结果和可视化图表
5. 查看系统预测和异常检测结果

## 示例日志文件

系统提供了三种不同格式的示例日志文件，位于`uploads`目录：

1. **sample_auth.log** - 认证日志示例
   - 包含SSH登录成功和失败记录
   - 模拟了暴力破解攻击行为
   - 适合测试系统的安全异常检测功能

2. **sample_system.log** - 系统日志示例
   - 包含各种系统服务的日志
   - 包括错误、警告和信息类型的日志条目
   - 适合测试系统日志分析功能

3. **sample_json.log** - JSON格式日志示例
   - 现代应用程序的日志格式
   - 包含结构化信息，方便分析
   - 适合测试高级分析功能

### 使用示例日志的方法

1. 在系统中注册并登录
2. 进入日志上传页面
3. 选择上传`uploads`目录中的任一示例日志文件
4. 点击"分析"按钮，等待分析完成
5. 查看分析结果和可视化图表

## 支持的日志格式

系统目前支持以下日志格式：

1. **Linux系统日志** - 标准syslog格式
   ```
   Mar 22 08:14:22 server-01 sshd[12345]: Accepted password for admin from 192.168.1.100 port 52413 ssh2
   ```

2. **Windows事件日志** - 转换后的文本格式
   ```
   2023-03-22 08:14:22 WIN-SERVER01 Security 4624 登录成功...
   ```

3. **JSON格式日志** - 现代应用的结构化日志
   ```json
   {"timestamp":"2023-03-22T08:14:22.123Z","level":"info","message":"Application started successfully"}
   ```

4. **通用时间戳格式** - 支持多种时间表示方式
   - ISO 8601格式: `2023-03-22T08:14:22Z`
   - 标准日期时间: `2023-03-22 08:14:22`
   - 简化格式: `Mar 22 08:14:22`

## 常见问题解决

1. **后端启动失败**
   - 确保已安装所有依赖: `pip install -r backend/requirements.txt`
   - 检查端口5000是否被占用，可通过修改`backend/app.py`中的端口号解决
   - 在Windows系统上可能需要安装Visual C++ Build Tools才能安装某些依赖

2. **前端启动失败**
   - 确保已安装Node.js和npm
   - 执行`cd frontend && npm install`安装所有依赖
   - 检查端口8080是否被占用

3. **上传文件失败**
   - 确保文件类型为支持的格式(.log, .txt, .csv, .json)
   - 检查文件大小不超过服务器设置的限制(默认50MB)
   - 确保uploads目录存在且有写入权限

4. **日志分析失败**
   - 检查日志格式是否被系统支持
   - 检查日志文件是否包含足够的有效数据
   - 查看后端服务日志获取详细错误信息

## 数据安全

- 用户密码使用bcrypt算法加密存储
- 敏感操作需要JWT token认证
- 文件上传有类型和大小限制
- 异步处理防止大文件阻塞系统

## 系统要求

- Python 3.8+
- Node.js 14+
- 现代浏览器 (Chrome, Firefox, Safari, Edge)
- 至少1GB可用磁盘空间

## 后续开发计划

1. 添加更多日志格式的支持
2. 增强异常检测能力
3. 添加用户角色和权限系统
4. 支持实时日志流分析
5. 增加导出报告功能
6. 优化大文件处理性能

## 需求和反馈

如有任何问题、建议或反馈，请提交issue或联系系统管理员。
